<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="../favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/bootstrap.min.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/build.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/dragula.min.css') }}"/>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,700,400' rel='stylesheet' type='text/css'>

    <title>RANKit Build</title>

    <style>
    .inner1 {
        display: inline-block;
    }

    .footer {
      background:#181818;
      text-align: center;
      font-size: 120%;
      color:#E3F2F4;
    }

    .navbar-center {
    position: absolute;
    width: 100%;
    text-align: center;
    margin: auto;
    }

    #submit {
      float: right;
    }

    .middle {
      grid-area: center;
    }

    h2 {
      text-align: center;
      color: #FFFFFF;
      font-size: 50px;
    }

    body {
      background-color: #3f435f;
    }


    .page-header h1 {
      text-align: center;
      color: #FFFFFF;
      font-size: 80px;
    }

    </style>


</head>

<body>
  <nav class="navbar navbar-default" role="navigation">
    <div class="navbar-header">

      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
      </button> <a class="navbar-brand" href={{ url_for('home.index') }}>RANKIT</a>
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li>
          <a href={{ url_for('build.listComparison', dataset_name= dataset_name) }} >Dataset</a>
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown">Build<strong class="caret"></strong></a>
          <ul class="dropdown-menu">
            <li>
              <a href={{ url_for('build.categorical', dataset_name= dataset_name) }}>Categories Comparison</a>
            </li>
            <li class="divider">
            </li>
            <li>
              <a href={{ url_for('build.listComparison', dataset_name= dataset_name) }}>List Comparison</a>
            </li>
            <li class="divider">
            </li>
            <li>
              <a href={{ url_for('build.pairwise', dataset_name= dataset_name) }}>Pairwise Comparison</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="#">Explore</a>
        </li>
      </ul>


    </div>

  </nav>

  <div class="page-header">
    <h1> <b>
      {{ view_name }}
    </b></h1>
  </div>

  <div class="wrapper">

    <div class="inner1">
    <form class="navbar-form navbar-center" role="search" style="display: inline;">
      <div class="form-group">
        <!-- <input type="text" id="search-criteria" class="form-control" onkeyup="myFunction()" placeholder="Search for names.."> -->
        <input type="text" id="search-criteria" class="form-control" placeholder="Search for names..">
      </div>
      <!-- <button type="submit" class="btn btn-default" id="search" value="search">
        Submit
      </button> -->
      <button type="button" class="btn btn-default" id="sort" onclick="sortDataset()">
        Sort
      </button>
      <button type="button" class="btn btn-default" id="shuffle" onclick="shuffleDataset()">
        Shuffle
      </button>
    </form>
  </div>

    <div class="scrollingDragInner">
      <div id="top" class="pool">
        <!-- objects from dataset inserted here -->
        {% for x in dataset %}
        <div id="{{x}}" class="object noSelect">{{x}}</div>
        {% endfor %}
      </div>
    </div>


  </div>

  {% block content %}
  {% endblock %}

  <div class="footer navbar-fixed-bottom"> Â© 2017 Worcester Polytechnic Institute All Rights Reserved. </div>

  <script>
    function getDataset() {
      return Array.from(document.querySelectorAll('.pool .object')).map(x => x.innerText)
    }

    function sortDataset() {
      const dataset = getDataset()
      dataset.sort()
      render(dataset)
    }

    function shuffleDataset() {
      const dataset = getDataset()
      for (let i = dataset.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [dataset[i], dataset[j]] = [dataset[j], dataset[i]];
      }
      render(dataset)
    }

    function render(dataset) {
      const pool = document.querySelector('#top')
      const html = dataset.map(x => `<div id="${x}" class="object noSelect">${x}</div>`).join('\n')
      pool.innerHTML = html
    }
  </script>


  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  <script type = "text/javascript" src = "{{ url_for('static', filename = 'js/jquery.sortable.min.js') }}" ></script>
  <script type = "text/javascript" src = "{{ url_for('static', filename = 'js/bootstrap.min.js') }}" ></script>
  <script type = "text/javascript" src="{{ url_for('static', filename = 'js/dragula.min.js') }}"></script>
  <script type = "text/javascript" src = "{{ url_for('static', filename = 'js/scripts.js') }}" ></script>
</body>
</html>
