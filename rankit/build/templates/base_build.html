<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="../favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/bootstrap.min.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/build.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/dragula.min.css') }}"/>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,700,400' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/reset.css') }}"/>
  	<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/style.css') }}"/>

    <title>RANKit Build</title>

    <style>
    .inner1 {
        display: inline-block;
    }

    .footer {
      background:#181818;
      text-align: center;
      font-size: 120%;
      color:#E3F2F4;
    }


    .navbar-right {
      padding: 0px 100px 0px;
    }


    #submit {
        width: 15%;
        -webkit-appearance: none;
        -moz-appearance: none;
        -ms-appearance: none;
        -o-appearance: none;
        appearance: none;
        border: none;
        border-radius: 4px;
        background: rgba(231,76,60, 1);
        color: #fefffb;
        font-weight: bold;
        font-size: 120%;
        margin-left: -2px 50px;
        /*float: right;*/

    }

    #submit[disabled] {
        background-color: #a1a1a1;
        color: #ffffff;
        width: 15%;
        vertical-align:baseline;
        font-family: sans-serif;
        font-weight: bold;
        font-size: 120%;
        float: right;
        margin: -2px 50px;

    }

    #submit1 {
        background-color: #23527c;
        color: #ffffff;
        vertical-align:baseline;
        font-family: sans-serif;
        font-weight: bold;
        font-size: 1.4rem;
        cursor: pointer;
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2);
        text-align: center;
        display: inline-block;
        float: right;
        margin: -2px 50px;

    }


    .middle {
      grid-area: center;
    }

    h2 {
      text-align: center;
      color: #333;
      font-size: 30px;
    }

    body {
      /*background-color: #3f435f;*/
      background-color: #f9f9f9;
    }


    .page-header h1 {
      padding: 0px 60px 0px;
      color: #333;
      font-size: 40px;
      margin: 0;
      display: inline-block;
    }

     .middleNav {
      margin: 2px 0px;
      padding-right: 405px;
      position: absolute;
      margin-left: auto;
      margin-right: auto;
      right: 0;
     }




    </style>


</head>

<body>
  <nav class="navbar navbar-default" role="navigation">
    <div class="navbar-header">

      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
      </button> <a class="navbar-brand" href={{ url_for('home.index') }}>RANKIT</a>
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li>
          <a href={{ url_for('build.buildList')}}> Dataset</a>
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown">Build<strong class="caret"></strong></a>
          <ul class="dropdown-menu">
            <li>
              <a href={{ url_for('build.categorical', dataset_name= dataset_name) }}>Categories Comparison</a>
            </li>
            <li class="divider">
            </li>
            <li>
              <a href={{ url_for('build.listComparison', dataset_name= dataset_name) }}>List Comparison</a>
            </li>
            <li class="divider">
            </li>
            <li>
              <a href={{ url_for('build.pairwise', dataset_name= dataset_name) }}>Pairwise Comparison</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="#">Explore</a>
        </li>
      </ul>

    </div>

  </nav>

  <div class="page-header">
    <h1> <b>
      {{ view_name }}
    </b></h1>

    <form class="navbar-form navbar-center middleNav" role="search" style="display: inline;">
      <input
        type="search"
        id="search-criteria"
        class="form-control"
        placeholder="Search by names..."
        onkeyup="searchDataset(event)"
      >
      <button type="button" class="btn btn-default" id="sort" onclick="sortDataset()">
        Sort
      </button>
      <button type="button" class="btn btn-default" id="shuffle" onclick="shuffleDataset()">
        Shuffle
      </button>
      <button type="button" id="cd-tour-trigger" class="btn btn-default">
        Intructions
      </button>

    </form>

    <button id="submit" class="cd-btn cd-modal-trigger list" disabled="disabled">RANK!</button>

  </div>


  <div class="wrapper">

    <div class="scrollingDragInner viewBackround">
      <div id="top" class="pool">
        <!-- objects from dataset inserted here -->
        {% for x in dataset %}
        <div id="{{x}}" class="object noSelect">{{x}}</div>
        {% endfor %}
      </div>
    </div>


  </div>


  <ul class="cd-tour-wrapper">
    <li class="cd-single-step">
      <span>Step 1</span>

      <div class="cd-more-info right">
        <h2>Step Number 1</h2>
        <p>Select and drag an object from the dataset.</p>
        <img src="{{ url_for('static',filename='images/img.png') }}">
      </div>
    </li> <!-- .cd-single-step -->

    <li class="cd-single-step">
      <span>Step 2</span>

      <div class="cd-more-info top">
        <h2>Step Number 2</h2>
        <p>Drag the object to the desired ranking order or panel.</p>
        <img src="{{ url_for('static',filename='images/img.png') }}">
      </div>
    </li> <!-- .cd-single-step -->

    <li class="cd-single-step">
      <span>Step 3</span>

      <div class="cd-more-info bottom">
        <h2>Step Number 3</h2>
        <p>You can sort the Dataset objects in Alphabetical Order by clicking the Sort button to help your ranking picks</p>
        <img src="{{ url_for('static',filename='images/img.png') }}">
      </div>
    </li>

    <li class="cd-single-step">
      <span>Step 4</span>

      <div class="cd-more-info bottom">
        <h2>Step Number 4</h2>
        <p>You can also Randomize the dataset objects by clicking the shuffle button.</p>
        <img src="{{ url_for('static',filename='images/img.png') }}">
      </div>
    </li>

    <li class="cd-single-step">
      <span>Step 5</span>

      <div class="cd-more-info left">
        <h2>Step Number 5</h2>
        <p>One your finished with the ranking, click the Rank button to see your results!</p>
        <img src="{{ url_for('static',filename='images/img.png') }}">
      </div>
    </li>

  </ul>
  <div class="cd-cover-layer"></div>


  {% block content %}
  {% endblock %}

  <div class="footer navbar-fixed-bottom"> Â© 2017 Worcester Polytechnic Institute All Rights Reserved. </div>

  <script>

    function getDataset() {
      return Array.from(document.querySelector('#top').children).map(x => x.innerText)
    }

    function sortDataset() {
      const dataset = getDataset()
      dataset.sort()
      render(dataset)
    }

    function shuffleDataset() {
      const dataset = getDataset()
      for (let i = dataset.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [dataset[i], dataset[j]] = [dataset[j], dataset[i]];
      }
      render(dataset)
    }

    const dataset = getDataset()
    function searchDataset(e) {
      let difference = dataset.filter(x => getRankedObjects().indexOf(x) == -1)
      const value = e.target.value
      const re = new RegExp(value, 'i')
      const newDataset = difference.filter(x => re.test(x))
      render(newDataset)
    }

    function render(dataset) {
      const pool = document.querySelector('#top')
      const html = dataset.map(x => `<div id="${x}" class="object noSelect">${x}</div>`).join('\n')
      pool.innerHTML = html
    }
  </script>


  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  <script type = "text/javascript" src = "{{ url_for('static', filename = 'js/jquery.sortable.min.js') }}" ></script>
  <script type = "text/javascript" src = "{{ url_for('static', filename = 'js/bootstrap.min.js') }}" ></script>
  <script type = "text/javascript" src="{{ url_for('static', filename = 'js/dragula.min.js') }}"></script>
  <script type = "text/javascript" src = "{{ url_for('static', filename = 'js/scripts.js') }}" ></script>
  <script type = "text/javascript" src = "{{ url_for('static', filename = 'js/jquery.mobile.min.js') }}" ></script>
  <script type = "text/javascript" src = "{{ url_for('static', filename = 'js/main.js') }}" ></script>
  <script type = "text/javascript" src = "{{ url_for('static', filename = 'js/modernizr.custom.js') }}" ></script>

</body>
</html>
